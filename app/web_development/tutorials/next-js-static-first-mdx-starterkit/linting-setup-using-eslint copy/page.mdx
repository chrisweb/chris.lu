---
title: Linting setup using ESLint - Tutorial
description: Linting setup using ESLint - Next.js static MDX blog | www.chris.lu Web development tutorials
keywords: ['Linting', 'ESLint', 'flat config', 'nextjs', 'mdx', 'plugin', 'parser']
published: 2024-08-19T18:45:45.444Z
modified: 2024-08-19T18:45:45.444Z
permalink: https://chris.lu/web_development/tutorials/next-js-static-mdx-blog/linting-setup-using-eslint
section: Web development
---

import { sharedMetaDataArticle } from '@/shared/metadata-article'
import Breadcrumbs from '@/components/tutorial/Breadcrumbs'
import Pagination from '@/components/tutorial/Pagination'

export const metadata = {
    title: frontmatter.title,
    description: frontmatter.description,
    keywords: frontmatter.keywords,
    alternates: {
        canonical: frontmatter.permalink,
    },
    openGraph: {
        ...sharedMetaDataArticle.openGraph,
        images: [{
          type: "image/png",
          width: 1200,
          height: 630,
          url: '/web_development/og/tutorials_next-static-mdx-blog/opengraph-image'
        }],
        url: frontmatter.permalink,
        section: frontmatter.section,
        publishedTime: frontmatter.published,
        modifiedTime: frontmatter.modified,
        tags: frontmatter.keywords,
    },
}

%toc%

<article>

<Breadcrumbs list={[
    { label: 'Web development tutorials', href: '/web_development' },
    { label: 'Next.js static MDX blog', href: '/web_development/tutorials/next-js-static-mdx-blog' },
]} />

# Next.js 15 and ESLint v9 linting setup 

Adding linting to a project is something I recommend doing as early as possible, similar to adding CSP to a project

Those are things that, if you postpone them, then you will have a lot more work later, which is why it is best to add linting as early as possible and then fix linting-related problems one by one as soon as they come up

> [!NOTE]
> the 5 upcoming chapters only contain background information, if you prefer you can also go straight to coding part in the ["ESLint 9 flat config for Next.js 15" chapter](#eslint-9-flat-config-for-nextjs-15)

## Linting library choice

If you would prefer an alternative linting solution, I recommend checking out [Biome](https://biomejs.dev/), they have an interesting [playground](https://biomejs.dev/playground/) to learn more about biome (compared to Prettier), they also have a very good documentation, for example I like that their [Getting Started](https://biomejs.dev/guides/getting-started/) page will show you the commands for npm, yarn, pnpm, bun and deno

## The state of ESLint v9 and flat config

ESLint mentions in their documentation:

> We are transitioning to a new config system in ESLint v9.0.0. The config system shared on this page is currently the default but will be deprecated in v9.0.0. You can opt-in to the new config system by following the instructions in the documentation.

You can still use **eslintrc** (classic) configuration files but it is recommended that you switch to the new [flat config files](https://eslint.org/docs/latest/use/configure/configuration-files)

Most projects have added support for ESLint v9:

* For example the plugin [eslint-plugin-react-hooks](https://github.com/facebook/react/releases/tag/eslint-plugin-react-hooks%405.0.0) introduced support for ESLint v9 on Oct. 11 2024 (in eslint-plugin-react-hooks v5.0.0); this is one of the plugins Next.js was waiting for
* Another plugin that you see in a lot of projects is typescript-eslint, in May 13 2024 they announced in their [typescript-eslint Issue #8211](https://github.com/typescript-eslint/typescript-eslint/issues/8211) that the first alpha of [typescript-eslint v8 (with ESLint v9 support)](https://github.com/typescript-eslint/typescript-eslint/pull/9002) got merged

If you are interested in the progress of more packages and plugins, then have a look at the Issue in the ESLint repository that keeps track of the [flat config rollout](https://github.com/eslint/eslint/issues/18093)

> [!MORE]  
> [ESLint "flat config rollout" issue](https://github.com/eslint/eslint/issues/18093)  
> [ESLint "flag config part 1" blog post](https://eslint.org/blog/2022/08/new-config-system-part-1/)  
> [ESLint "flag config part 2" blog post](https://eslint.org/blog/2022/08/new-config-system-part-2/)  
> [ESLint "flag config part 3" blog post](https://eslint.org/blog/2022/08/new-config-system-part-3/)  
> [ESLint "flat config files" RFC](https://github.com/eslint/rfcs/tree/main/designs/2019-config-simplification)  

## Next.js 15 ESLint v9 update

In the [previous version of this tutorial (using Next.js 14)](/web_development/tutorials/next-js-static-mdx-blog/linting-setup-using-eslint) CNA installed ESLint v8, ESLint v8 had support for **eslintrc** (classic) configuration files, but eslintrc files are now **deprecated**.

Also good to know, is that support for [**eslintrc** (classic) configuration files will be removed in ESLint version 10.0.0](https://eslint.org/blog/2023/10/flat-config-rollout-plans/#eslintrc-removed-in-eslint-v10.0.0)

The [next 15 blog post](https://nextjs.org/blog/next-15#eslint-9-support) mentioned that:

* you can now use ESLint v9 (or continue using v8)
* if Next.js detects that you are still using ESLint v8 they automatically set the `ESLINT_USE_FLAT_CONFIG=false` flag, which [enables support for flat config files in ESLint v8](https://eslint.org/docs/latest/use/configure/migration-guide#start-using-flat-config-files)

Most of that work happened in the [PR #71218](https://github.com/vercel/next.js/pull/71218/files)

### Not everything is ESLint v9 and flat config (yet)

If you use the latest **create-next-app** (CNA) it will NOT install ESLint v9, instead CNA sets ESLint to ^8 (in the package.json) which means npm will attempt to install v8.57.1 and doing so will trigger a npm warn deprecated message:

> eslint@8.57.1: This version is no longer supported. Please see https://eslint.org/version-support for other options.

If you use npm run lint (next lint cli) and have no eslint configuration file, then next lint will install ESLint v9

No matter if you have used the CNA or next lint, both still create eslintrc files and NOT flat config files, so yes Next.js has updated their packages to support ESLint v9 but they have NOT yet updated their packages to support [shareable flat config](https://eslint.org/docs/latest/extend/shareable-configs) files

Both CNA and next lint installed the latest [eslint-config-next](https://github.com/vercel/next.js/tree/canary/packages/eslint-config-next), however the latest **eslint-config-next** is not compatible with flat config files, as we will see in one of the upcoming chapters, which does NOT mean you can NOT use eslint-config-next with flat configs, but it means that if you do you will need to add a compatibility layer for it wo work (which is what we will do in one of the upcoming chapters)

## Why does Next.js have two packages related to ESLINT?

Next.js has **2 packages** that are related to ESLint, one is called eslint-**config**-next (ESLint Config), and the other one is called eslint-**plugin**-next (ESLint Plugin)

* [eslint-config-next](https://www.npmjs.com/package/eslint-config-next)
* [eslint-plugin-next](https://www.npmjs.com/package/@next/eslint-plugin-next)

Package 1: **eslint-config-next** (ESLint Config) intends to make it easier to get started with ESLint by installing and configuring several plugins for us, some of these plugins are:

* [eslint-plugin-react](https://www.npmjs.com/package/eslint-plugin-react)
* [eslint-plugin-react-hooks](https://www.npmjs.com/package/eslint-plugin-react-hooks)
* [eslint-plugin-next](https://www.npmjs.com/package/@next/eslint-plugin-next)
* and some more, if you want the full list of plugins that eslint-config-next installs, check out the [eslint-config-next package.json dependencies](https://github.com/vercel/next.js/blob/b2625477c002343e7fe083204c45af1fdd7cd407/packages/eslint-config-next/package.json)

Package 2: **eslint-plugin-next** is the actual ESLint plugin for Nextjs (called **@next/eslint-plugin-next** on npmjs), it aims to catch common problems in a Next.js application

For a complete list of rules that the Next.js ESLint plugin adds check out the [Nextjs "ESLint rules" documentation](https://nextjs.org/docs/app/building-your-application/configuring/eslint#eslint-plugin) or have a look at the [eslint-plugin-next rules directory on GitHub](https://github.com/vercel/next.js/tree/canary/packages/eslint-plugin-next/src/rules)

> [!MORE]  
> [Next.js "ESLint" documentation](https://nextjs.org/docs/app/building-your-application/configuring/eslint)  

## ESLint 9 flat config for Next.js 15

First we are going to make sure we have the latest ESLint v9.x version installed by using the following command:

```shell
npm i eslint@latest --save-dev --save-exact
```

In the [Project setup and Next.js 15 installation](/web_development/tutorials/next-js-static-first-mdx-starterkit/project-setup-and-first-commit) chapter we used **create-next-app** (CNA) which created an .eslintrc.json, which is a **classic** ESLint configuration file, in this chapter we want to convert that **classic** configuration file into a [**flat config** file](https://eslint.org/docs/latest/use/configure/configuration-files)

At this point we can check out the [ESLint "Migrate Your Config File" documentation](https://eslint.org/docs/latest/use/configure/migration-guide) which tells us to use the [ESLint Configuration Migrator](https://eslint.org/blog/2024/05/eslint-configuration-migrator/) which is tool to help us convert eslintrc configuration files to Flat Config files

Our eslintrc file currently looks like this:

```json title=".eslintrc.json"
{
    "extends": [
        "next/core-web-vitals",
        "next/typescript"
    ]
}
```

To convert it we launch the ESLint Configuration Migrator, using the following command (depending on what extension you use for your eslintrc, if you do NOT use json then you need to adjust the file name in the command):

```shell
npx @eslint/migrate-config .eslintrc.json
```

The configuration migrator will convert your `.eslintrc.json` classic configuration file into an `eslint.config.mjs` flat config file

At the end of the update the configuration migrator will display a message, in which it recommends to now install the following dependencies, we follow through by executing the following command:

```shell
npm install @eslint/js @eslint/eslintrc --save-dev --save-exact
```

The 2 dependencies we just installed are needed by the `eslint.config.mjs` file, as it will import and use code from **@eslint/js** and **@eslint/eslintrc**

Now that we have converted our classic configuration to a flat configuration, let's open the `eslint.config.mjs` file and have a look at what is inside:

```js title="eslint.config.mjs"
import path from "node:path";
import { fileURLToPath } from "node:url";
import js from "@eslint/js";
import { FlatCompat } from "@eslint/eslintrc";

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);
const compat = new FlatCompat({
    baseDirectory: __dirname,
    recommendedConfig: js.configs.recommended,
    allConfig: js.configs.all
});
export default [...compat.extends("next/core-web-vitals", "next/typescript")];
```

We can see that the extends that was in our `.eslintrc.json` file got converted into the extends from the compatibility layer (which it has created using the `FlatCompat` class from the `@eslint/eslintrc` package)

> [!TIP]  
> If you are not creating a new project from scratch but instead have to upgrade a legacy ESLint setup, then I recommend checking out the [ESLint Compatibility Utilities](https://eslint.org/blog/2024/05/eslint-compatibility-utilities/) blog post from May 2024, it has some details about yet another package which has tools that can fix problems common problems that arise when using legacy rules and configurations

One last thing, the migration script has NOT deleted our original eslintrc file, so I recommend deleting the `.eslintrc.json` (in the root of the project) manually, we won't need it anymore

At this point you have a working ESLint setup using ESLint v9 and flat config files, you can use the following command to try it out:

```shell
npm run lint
```

### Typescript ESLint configuration files

As we converted our **next.config** file to a (`next.config.ts`) typescript file, to be consistent we will also convert our **eslint.config** to an `eslint.config.ts` file (but if you prefer not to and want to keep the eslint.config.mjs as is, then feel free to skip to the [ignores and linter options](#ignore-folders-and-setting-linter-options) chapter)

First we rename our ESlint configuration file to `eslint.config.ts` (you can also use `eslint.config.mts` or `eslint.config.cts` if you prefer), in this tutorial I will use **eslint.config.ts** (to match how we named the **next.config.ts** file)

Next we need to install additional [@types/eslint__eslintrc](https://www.npmjs.com/package/@types/eslint__eslintrc) types for the [@eslint/eslintrc](https://www.npmjs.com/package/@eslint/eslintrc) package:

```shell
npm i @types/eslint__eslintrc --save-dev --save-exact
```

Then we need to add the [jiti](https://www.npmjs.com/package/jiti) dependency (when using Node.js, Deno and Bun users don't need it) which is required to read typescript configuration files:

```shell
npm i jiti --save-dev --save-exact
```

> [!MORE]  
> [ESLint "typescript configuration files" documentation](https://eslint.org/docs/latest/use/configure/configuration-files#typescript-configuration-files)  

#### Add types to the ESLint configuration file

We edit the `eslint.config.ts` file and make the following few changes:

```ts title="eslint.config.ts" showLineNumbers {5}
import path from 'node:path'
import { fileURLToPath } from 'node:url'
import js from '@eslint/js'
import { FlatCompat } from '@eslint/eslintrc'
import type { Linter } from 'eslint'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)
const compat = new FlatCompat({
    baseDirectory: __dirname,
    recommendedConfig: js.configs.recommended,
    allConfig: js.configs.all
})

export default [
    ...compat.extends('next/core-web-vitals', 'next/typescript'),
] satisfies Linter.Config[]
```

Line 5: we import the ESLint **Linter** type

Line X: we use the [satisfies operator](https://www.typescriptlang.org/docs/handbook/release-notes/typescript-4-9.html#the-satisfies-operator) (that got introduced in TypeScript 4.9) to tell Typescript that our default export will be an array of **Linter.Config**, each **ESLint Linter Config** contains information about which files should get included or ignored, custom rules configurations, you can give it a name and some more which we will see more in detail in the upcoming chapters

> [!NOTE]  
> Because we added the types for `@eslint/eslintrc` package in the previous chapter we now have a typed FlatCompat (in case you want to check out what other options are available)  

#### Replacing next lint with eslint

The typescript eslint configuration files are not supported by the Next.js 15.x lint cli (as of now), the file gets mentioned in the [Next.js **runLintCheck** code](https://github.com/vercel/next.js/blob/c3bc7d05983d3c5604d4532ceb706d5973aef642/packages/next/src/lib/eslint/runLintCheck.ts#L366) but there is no implementation (yet)

If you have converted your ESLint configuration to an `eslint.config.ts` file and use the linting command `npm run lint` then `next lint` will not find our configuration file, and instead starts the wizard (which is supposed to guide us through setting up a new ESLint classic configuration)

As we can't use next lint we need to create our own linting command:

* as we can NOT use **next lint**, we will use the **eslint cli** instead
* we will also enable the [(experimental) typescript support](https://eslint.org/docs/latest/use/configure/configuration-files#typescript-configuration-files) for ESLint Flat Config files by adding an extra flag to our command (typescript support for configuration files is a feature that got added in [ESLint v9.9.0](https://eslint.org/blog/2024/08/eslint-v9.9.0-released/#experimental-typescript-configuration-files))
* finally we will enable caching (as would next lint do) and we set the cache folder path to the same folder that Next.js uses

```shell
npx eslint --flag unstable_ts_config --cache --cache-location .next/cache/eslint/
```

Now that we have created a new command we can update our package.json (in the root of the project) to update our linting script(s):

```json title="package.json" {6}
"scripts": {
    "dev": "next dev",
    "dev-turbo": "next dev --turbopack",
    "build": "next build",
    "start": "next start",
    "lint": "eslint --flag unstable_ts_config --cache --cache-location .next/cache/eslint/"
},
```

There is one more problem left, the **next build** script uses **next lint** by default, as we just replaced **next lint** with the **eslint cli** we also need to replace the build script like so:

```json title="package.json" {4}
"scripts": {
    "dev": "next dev --turbopack",
    "dev-turbo": "next dev --turbopack",
    "build": "npm run lint && next build",
    "start": "next start",
    "lint": "eslint --flag unstable_ts_config --cache --cache-location .next/cache/eslint/"
},
```

And now that we have updated the build script to use our custom linting command, we need to edit the Next.js configuration file and tell Next.js to NOT do its own linting during builds:

```ts title="next.config.ts" showLineNumbers{43}
eslint: {
    // we have added a lint command to the package.json build script
    // which is why we disable the default next lint (during builds) here
    ignoreDuringBuilds: true,
},
```

> [!MORE]  
> [Next.js "ignoreDuringBuilds" documentation](https://nextjs.org/docs/app/api-reference/next-config-js/eslint)  

### Adding even more scripts

We could add more scripts related to linting, for example here we add a backup of the command that Next.js used, we also add a command without the use of a cache, the last two use different flags (to debug ESLint configurations and fix problems automatically)

First we update our `package.json` file (in the root) and add the following scripts:

```json title="package.json" {4-8}
"scripts": {
    "dev": "next dev --turbopack",
    "dev-turbo": "next dev --turbopack",
    "build": "npm run lint && next build",
    "start": "next start",
    "next-lint": "next lint",
    "next-lint": "next lint",
    "lint": "eslint --flag unstable_ts_config --cache --cache-location .next/cache/eslint/",
    "lint-nocache": "eslint --flag unstable_ts_config",
    "lint-debug": "eslint --flag unstable_ts_config --debug",
    "lint-fix": "eslint --flag unstable_ts_config --fix"
},
```

Then if you want you could update the README with these explanations:

```md title="README.md"
`npm run next-lint`: a backup of the original next.js linting command
`npm run lint`: to manually use our (custom) linting command, it will scan our code and help us find problems in it (gets used by the build command before building)
`npm run lint-nocache`: same as **lint** command without cache, takes longer but can be useful when testing changes
`npm run lint-debug`: the **lint** with the ESLint **debug** flag (for a more verbose output)
`npm run lint-fix`: the **lint** command with the **fix** flag activated (to automatically fix errors and warnings if it can), you probably want to create a new branch before running this as it might produce a big quantity of changed files
```

## ESLint debugging tools

Here are 3 tools I found while working on this ESLint tutorial (I wish I had found earlier ðŸ˜‰) that will improve your ESLint debugging experience greatly

Our first tool is a cli command:

```shell
npx eslint --debug eslint.config.ts
```

This is a fantastic tool (cli command) that will output a lot of information that could help you while debugging, run the same command without a path to your configuration file and it will show you even more debugging information by performing a very verbose linting (if you don't use a typescript eslint flat config then you need to adjust the name, for example to `npx eslint --debug eslint.config.mjs` for a javascript flat config)

```shell
npx eslint --print-config eslint.config.ts
```

Another cli command that will print a json representation of what it found in your configuration file, which is a great tool to verify if everything you have set up is included

The third tool is the one that helped me the most while writing this guide, this tool greatly improves the **(developer experience) DX** when working with the new flat config files by helping you visualize the structure and content of your eslint flat config:

```shell
npx eslint --inspect-config eslint.config.ts
```

After running the command, the **ESLint Config Inspector** will launch a server on `http://localhost:7777/` (it should automatically use your default browser)

The main page displays a nice overview of your files, ignores, options, plugins and rules, for each of your configurations

On this overview page you see why it is a good idea to give your configurations a name ðŸ˜‰

Each configuration (row) is a disclosure widget, expand it and it will show you even more information about each of your configurations

> [!MORE]  
> [ESLint "Debug Your Configuration" documentation](https://eslint.org/docs/latest/use/configure/debug)  
> [ESLint "Config Inspector" readme](https://eslint.org/docs/latest/use/configure/debug)  

## Language and Linter Options (optional)

We could add global **language options** like the **ecmaVersion** or set a default **parser**, but in the upcoming chapters we will use shared configuration objects, which will set those options for us

If however you want to learn more about the options that are available, then have a look at the [ESLint "configuration objects" documentation](https://eslint.org/docs/latest/use/configure/configuration-files#configuration-objects)

> [!MORE]  
> [ESLint "configuration objects" documentation](https://eslint.org/docs/latest/use/configure/configuration-files#configuration-objects)

### Reporting unused "eslint-disable comments" option

When experimenting with ESLint and trying out setups, you might at some point add disable comments, but then later you decide to completely disable the rule using the ESLint rules configuration, in which case the disable comment becomes unused

> [!WARN]  
> If you are using the ESLint recommend rules, then ESLint will already add the **reportUnusedDisableDirectives** to the configuration

The easy way to spot those unused comments is by activating the ESLint Linter option:

```ts title="eslint.config.mjs"
{
    linterOptions: {
        reportUnusedDisableDirectives: 'warn'
    }
},
```

Line X: we add a new configuration object to our flat config to enable the **reportUnusedDisableDirectives** option

## Ignore folders

In this chapter we will add an **ignores** configuration to exclude some folders from linting, so that we end up with a file that looks like this:

```ts title="eslint.config.ts" showLineNumbers {16-21}
import path from 'node:path'
import { fileURLToPath } from 'node:url'
import js from '@eslint/js'
import { FlatCompat } from '@eslint/eslintrc'
import type { Linter } from 'eslint'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)
const compat = new FlatCompat({
    baseDirectory: __dirname,
    recommendedConfig: js.configs.recommended,
    allConfig: js.configs.all
})

export default [
    ...compat.extends('next/core-web-vitals', 'next/typescript'),
    {
        name: 'ignoreESLintConfig',
        // the ignores option needs to be in a separate configuration object
        // replaces the .eslintignore file
        ignores: [
            '.next/',
            '.vscode/',
            'public/',
        ]
    },
] satisfies Linter.Config[]
```

Lines X to Y: we added a configuration block and used the **ignores** option to tell ESLint which folders it should exclude from linting, we gave our configuration block a name, which will make it easier to find the configuration when using debugging tools (as we saw in the [ESLint debugging tools](#eslint-debugging-tools) chapter)

> [!TIP]  
> when the **ignores** option gets used in its own configuration block, then it acts as global ignores, meaning it tells ESLint to always exclude those files from linting
>  
> however if the ignores is in a configuration block with other keys, then the ignores only applies to that configuration

> [!MORE]  
> [ESLint "ignores" documentation](https://eslint.org/docs/latest/use/configure/ignore)  
> [ESLint "Report unused eslint-disable comments" documentation](https://eslint.org/docs/latest/use/configure/rules#report-unused-eslint-disable-comments)

### Ignoring folders by using gitignore

An alternative to having an ignores list in the ESLint configuration is to use the content of the `.gitignore` file to create an ESLint ignores list

```ts title="eslint.config.ts" showLineNumbers
import path from 'node:path'
import { fileURLToPath } from 'node:url'
import js from '@eslint/js'
import { FlatCompat } from '@eslint/eslintrc'
import type { Linter } from 'eslint'
import { includeIgnoreFile } from '@eslint/compat'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)
const compat = new FlatCompat({
    baseDirectory: __dirname,
    recommendedConfig: js.configs.recommended,
    allConfig: js.configs.all
})
const gitignorePath = path.resolve(__dirname, '.gitignore')

export default [
    ...compat.extends('next/core-web-vitals', 'next/typescript'),
    includeIgnoreFile(gitignorePath),
] satisfies Linter.Config[]
```

Line X: we import the **includeIgnoreFile** function from ESLint compat package

Line Y: we set the path to our gitignore file, which is at root of our project

Line Z: we use the **includeIgnoreFile** function, which will scan the gitignore file content and turn it into a list of files and folders ESLint will **ignore**

For this to work you need to install one more dependency [@eslint/compat](https://www.npmjs.com/package/@eslint/compat):

```shell
npm i @eslint/compat --save-dev --save-exact
```

## Javascript linting

If you are not using Typescript for everything (including next.config and eslint.config) then you probably have at least a few Javascript files you want to lint

This is why the first configuration will tell ESLint to use the recommend rules for our Javascript files:

```ts title="eslint.config.ts" showLineNumbers {16-21}
import js from '@eslint/js'
import { FlatCompat } from '@eslint/eslintrc'
import type { Linter } from 'eslint'

const compat = new FlatCompat()

const jsESLintConfig = [
    {
        name: 'jsESLintConfig',
        // all files expect mdx files
        files: ['**/*.mjs', '**/*.ts?(x)'],
        ...js.configs.recommended,
    },
]

export default [
    ...compat.extends('next/core-web-vitals', 'next/typescript'),
    {
        name: 'ignoreESLintConfig',
        // the ignores option needs to be in a separate configuration object
        // replaces the .eslintignore file
        ignores: [
            '.next/',
            '.vscode/',
            'public/',
        ]
    },
    ...jsESLintConfig
] satisfies Linter.Config[]
```

Lines A to B: first we remove two Node.js module imports as we will NOT need them anymore

Lines C to D: we remove the **FlatCompat** options as the new configuration we will add will take care of adding the recommended ESLint rules to Javascript files

Lines X to Y: we create a custom ESLint configuration to apply a recommended set of linting rules to our Javascript (and Typescript files, if you use Typescript as well)

Line Z: we add the **jsESLintConfig** configuration to the default export

> [!NOTE]  
> the changes we did here, moved the usage of ESLint recommended from the **FlatCompat** options to a custom flat config as this is more future proof (as you hopefully won't need to use the compat mode at some point anymore), but mainly because it ensures that the rules only get applied to Javascript (and Typescript) files, which matters as (in a future chapter) we will lint files (like .mdx) for which we do NOT want to apply these rules
>  
> `files: ['**/*.mjs', '**/*.ts?(x)']`
>  
> in this example we allow the ESLint recommend rules to be used when the extension is mjs, ts or tsx, of course feel free to adjust the list based on your projects needs, for example if you don't use Typescript you can remove the glob `'**/*.ts?(x)'` for the two ts and tsx extensions, or you add support for .js and .cts extensions by changing the list to this `['**/*.js', '**/*.mjs', '**/*.cjs']`

## Typescript Linting

Currently the configuration uses [next/typescript](https://nextjs.org/docs/app/building-your-application/configuring/eslint#typescript), which (as the documentation explains well) adds the [recommended rules](https://typescript-eslint.io/users/configs/#recommended) from the [@typescript-eslint/eslint-plugin](https://www.npmjs.com/package/@typescript-eslint/eslint-plugin)

> [!NOTE]  
> There is one major difference between classic configs and flat config setups for **typescript-eslint**, for an ESLint v8 setup you would usually install two packages, [@typescript-eslint/eslint-plugin](https://www.npmjs.com/package/@typescript-eslint/eslint-plugin) the package to the tseslint plugin and also the [@typescript-eslint/parser](https://www.npmjs.com/package/@typescript-eslint/parser) parser package, but since ESLint 9 most tutorials (that I saw) had switched to using a single [typescript-eslint](https://www.npmjs.com/package/typescript-eslint) package that contains the plugin, the parser as well as configurations

We start by installing **typescript-eslint** package using the following command: 

```shell
npm i typescript-eslint --save-dev --save-exact
```

Next we will fine tune our typescript linting by adding a custom configuration for `.ts` and `.tsx` files:

```ts title="eslint.config.ts" showLineNumbers {4-5}
import js from '@eslint/js'
import { FlatCompat } from '@eslint/eslintrc'
import tseslint, { configs as tseslintConfigs } from 'typescript-eslint'
import type { FlatConfig } from '@typescript-eslint/utils/ts-eslint'

const compat = new FlatCompat()

const jsESLintConfig = [
    {
        name: 'jsESLintConfig',
        // all files expect mdx files
        files: ['**/*.mjs', '**/*.ts?(x)'],
        ...js.configs.recommended,
    },
]

const tsESLintConfig = tseslint.config(
    {
        name: 'tsESLintConfig',
        extends: [
            ...tseslintConfigs.recommended,
            // OR more type checked rules
            //...tseslintConfigs.recommendedTypeChecked,
            // OR more strict rules
            //...tseslintConfigs.strict,
            // OR more strict and type checked rules
            //...tseslintConfigs.strictTypeChecked,
            // optional stylistic rules
            ...tseslintConfigs.stylistic,
            // OR the type checked version
            //...tseslintConfigs.stylisticTypeChecked,
        ] as FlatConfig.ConfigArray,
        files: ['**/*.mjs', '**/*.ts?(x)'],
        // only needed if you use TypeChecked rules
        languageOptions: {
            parserOptions: {
                // https://typescript-eslint.io/getting-started/typed-linting
                projectService: true,
                tsconfigRootDir: import.meta.dirname,
                // react recommended is already adding the ecmaFeatures
                /*ecmaFeatures: {
                    jsx: true,
                },*/
                // following option already added by eslint recommended
                // which we added in the jsESLintConfig
                //warnOnUnsupportedTypeScriptVersion: false,
            },
        },
    },
    {
        // disable type-aware linting on JS files
        // only needed if you use TypeChecked rules
        files: ['**/*.mjs'],
        ...tseslintConfigs.disableTypeChecked,
    },
)

export default [
    ...compat.extends('next/core-web-vitals'),
    {
        name: 'ignoreESLintConfig',
        // the ignores option needs to be in a separate configuration object
        // replaces the .eslintignore file
        ignores: [
            '.next/',
            '.vscode/',
            'public/',
        ]
    },
    {
        linterOptions: {
            reportUnusedDisableDirectives: 'warn'
        }
    },
    ...jsESLintConfig,
    ...tsESLintConfig,
] satisfies FlatConfig.Config[]
```

Line X: we import typescript-eslint (which we installed in the previous step)

Line Y: we import a type from the @typescript-eslint utilities (instead of the [type from the ESLint package](https://eslint.org/docs/latest/use/configure/configuration-files#typescript-configuration-files) as is recommend in the ESLint documentation)

Line A: we use the `config()` function from the typescript-eslint package

Line R: we first specify that the name for custom flat config will be **tsESLintConfig**

Lines U to I: we use the extends option to define which sets of rules we want to use:

For the [typescript-eslint rules](https://typescript-eslint.io/users/configs) you have different `tseslint.configs.*` you can chose from, the **recommended** is config contains a set of recommended rules (this is what Next.js uses), there is also **recommendedTypeChecked** which adds recommended rules that require type information; Next we have **strict** and **StrictTypeChecked**, which you could use instead of the recommended rules, these sets include rules are more opinionated (which is why some projects don't use them, however they can help catch bugs so I recommend giving it a try, you can still disable them later by switching back to **recommended** rules or you could disable some of the rules by setting them to off)

Then we have to chose between two more sets of rules, the **stylistic** set contains rules that do NOT impact program logic but focus on enforcing "simpler code patterns", which means they are even more , and then there is **stylisticTypeChecked** the second option (which I will use in this tutorial) which adds a few more stylistic rules that require type information

> [!TIP]  
> To better understand what is in those sets I **highly** recommend checking out the typescript-eslint [rules overview](https://typescript-eslint.io/rules/) page

Lines F to G: We use the `files` option to tell ESLint which files (extensions) we want to include, for this tutorial we will enable linting for regular typescript (.ts) and typescript react files (.tsx)

Lines F to G: Then we add some parser options, this configuration is needed if you use one of the **"type checked"** sets (if are NOT using `TypeChecked` rules, then you can delete the `languageOptions` from your configuration)

> [!NOTE]  
> the **ecmaFeatures** and **warnOnUnsupportedTypeScriptVersion** parser options in the **languageOptions** are commented out because there are other configurations that we already use or will use in an upcoming chapter that set these options for us (I keep those lines as a reminder that the two options exist but if you prefer you can delete them)

Line C: we can now remove `next/typescript` from the compatibility mode (as it gets replaced by our custom flat config using typescript-eslint that we added above)

Line D: we set the **Config** type from the @typescript-eslint package as type for our default export

> [!MORE]  
> [typescript-eslint "rules" overview](https://typescript-eslint.io/rules/)  
> [typescript-eslint "type checked" documentation](https://typescript-eslint.io/getting-started/typed-linting/)  

### Why we switched from ESLint to typescript-eslint types

In the first ESLint chapters, we used the [type from the ESLint package](https://eslint.org/docs/latest/use/configure/configuration-files#typescript-configuration-files) like this:

```ts
import type { Linter } from 'eslint'
```
(...)
```ts
] satisfies Linter.Config[]
```

However if do keep using those types and want to use typescript-eslint then you do will start to see typescript errors like this one:

> Type `(Config | FlatConfig)[]` does not satisfy the expected type `Config<RulesRecord>[]`.

There are several related tickets about this, like for example [issue #8613](https://github.com/typescript-eslint/typescript-eslint/issues/8613#issuecomment-1983584487) and [issue #9724](https://github.com/typescript-eslint/typescript-eslint/issues/9724), the TLDR is use the types from typescript-eslint

This is why in the latest example, we switched to use the type from the typescript-eslint package instead:

```ts
import type { FlatConfig } from '@typescript-eslint/utils/ts-eslint'
```
(...)
```ts
] satisfies FlatConfig.Config[]
```

## Replacing **eslint-config-next** with a custom flat config

Before we can start adding linting for MDX files and markdown content we first need to get rid of **eslint-config-next**

> [!WARN]  
> I usually never recommend to remove a component or disable a feature of a framework unless really necessary, as doing so will increase your maintenance costs and your technical debt counter will go up, there are however situations where it is required to make the transition, which is why in this chapter we will replace **eslint-config-next** with a [sharable flat config](https://eslint.org/docs/latest/extend/shareable-configs), which will unlock all the features that come with ESLint v9 flat config(s)
>  
> If **eslint-config-next** adds features without migrating first to ESLint v9 flat config, then we will have to maintain our implementation by backporting their latest update (changes) into our own custom config
>  
> In the future **eslint-config-next** will hopefully get converted to a real ESLint v9 [sharable flat config](https://eslint.org/docs/latest/extend/shareable-configs) and then this chapter will be obsolete

As we saw in the [Why does Next.js have two packages related to ESLINT?](#why-does-nextjs-have-two-packages-related-to-eslint) **eslint-config-next** will add several plugins to your linting setup, however as we want to get rid of **eslint-config-next** we will now need to manually re-add support for those packages

> [!NOTE]  
> In this tutorial we will use [eslint-plugin-import-x](https://www.npmjs.com/package/eslint-plugin-import-x), but if you prefer you can use the [eslint-plugin-import](https://www.npmjs.com/package/eslint-plugin-import) package instead, and if you do use **eslint-plugin-import** as well as typescript, then you will probably also want to add [eslint-import-resolver-typescript](https://www.npmjs.com/package/eslint-import-resolver-typescript)  
>  
> We will also NOT use [@rushstack/eslint-patch](https://www.npmjs.com/package/@rushstack/eslint-patch), but if you prefer to use it, you can do so, as it is now [ESLint v9 compatible](https://github.com/microsoft/rushstack/pull/4719). So if you intend to use Next.js in a big monorepo then you should probably install / configure it too  

The plugins we will use are [eslint-plugin-import-x](https://www.npmjs.com/package/eslint-plugin-import-x), [eslint-plugin-react](https://www.npmjs.com/package/eslint-plugin-react), [eslint-plugin-react-hooks](https://www.npmjs.com/package/eslint-plugin-react-hooks), [eslint-plugin-jsx-a11y](https://www.npmjs.com/package/eslint-plugin-jsx-a11y), and we install them using the following command: 

```shell
npm i eslint-plugin-import-x@latest eslint-plugin-react@latest eslint-plugin-react-hooks@latest eslint-plugin-jsx-a11y@latest --save-dev --save-exact
```

If you are using Typescript, you will also want to install the following types:

```shell
npm i @types/eslint__eslintrc@latest @types/eslint-plugin-jsx-a11y@latest --save-dev --save-exact
```

As we are attempting to reproduce what **eslint-config-next**, this means that we are installing dependencies that we already in the project, but it will make sure that we are not missing a package in our stack and it will ensure we have the latest version installed for each of them (as we added the @latest tag in the command(s))

Now that we have our packages installed we can finally start updating our eslint.config.ts again:

```ts title="eslint.config.ts" showLineNumbers {4-5}
import js from '@eslint/js'
import { FlatCompat } from '@eslint/eslintrc'
import tseslint, { configs as tseslintConfigs } from 'typescript-eslint'
import type { FlatConfig } from '@typescript-eslint/utils/ts-eslint'
import importX from 'eslint-plugin-import-x'
import react from 'eslint-plugin-react'
// @ts-expect-error this package has no types
import reactHooks from 'eslint-plugin-react-hooks'
import jsxA11y from 'eslint-plugin-jsx-a11y'

const compat = new FlatCompat()

const jsESLintConfig = [
    {
        name: 'jsESLintConfig',
        // all files expect mdx files
        files: ['**/*.mjs', '**/*.ts?(x)'],
        ...js.configs.recommended,
    },
]

const tsESLintConfig = tseslint.config(
    {
        name: 'tsESLintConfig',
        extends: [
            ...tseslintConfigs.recommended,
            // OR more type checked rules
            //...tseslintConfigs.recommendedTypeChecked,
            // OR more strict rules
            //...tseslintConfigs.strict,
            // OR more strict and type checked rules
            //...tseslintConfigs.strictTypeChecked,
            // optional stylistic rules
            ...tseslintConfigs.stylistic,
            // OR the type checked version
            //...tseslintConfigs.stylisticTypeChecked,
            react.configs.flat?.recommended,
            react.configs.flat?.['jsx-runtime'],
            jsxA11y.flatConfigs.recommended,
            importX.flatConfigs.recommended,
            // the following is only needed if you use typescript
            importX.flatConfigs.typescript,
        ] as FlatConfig.ConfigArray,
        files: ['**/*.mjs', '**/*.ts?(x)'],
        // only needed if you use TypeChecked rules
        languageOptions: {
            parserOptions: {
                // https://typescript-eslint.io/getting-started/typed-linting
                projectService: true,
                tsconfigRootDir: import.meta.dirname,
                // react recommended is already adding the ecmaFeatures
                /*ecmaFeatures: {
                    jsx: true,
                },*/
                // following option already added by eslint recommended
                // which we added in the jsESLintConfig
                //warnOnUnsupportedTypeScriptVersion: false,
            },
        },
    },
    {
        // disable type-aware linting on JS files
        // only needed if you use TypeChecked rules
        files: ['**/*.mjs'],
        ...tseslintConfigs.disableTypeChecked,
    },
)

export default [
    ...compat.extends('next/core-web-vitals'),
    {
        name: 'ignoreESLintConfig',
        // the ignores option needs to be in a separate configuration object
        // replaces the .eslintignore file
        ignores: [
            '.next/',
            '.vscode/',
            'public/',
        ]
    },
    {
        linterOptions: {
            reportUnusedDisableDirectives: 'warn'
        }
    },
    ...jsESLintConfig,
    ...tsESLintConfig,
] satisfies FlatConfig.Config[]
```

Lines A to B: we import the 4 plugins

> [!NOTE]  
> If our configuration is a typescript file, then you have to use a typescript comment to inform typescript that it will not find any types for the eslint-plugin-react-hooks
>  
> as of now I couldn't find any types for this package, which is why I added the @ts-expect-error comment (if you do find types, then install them and remove the comment)

Lines C to D: we extend the shared flat configs from 3 of our plugins:

* we use the react (eslint plugin) recommended flat config that will take of configuring and adding rules for React to our linting setup
* next we add the react **jsx-runtime** config (since [React 17 the new JSX transform](https://legacy.reactjs.org/blog/2020/09/22/introducing-the-new-jsx-transform.html#removing-unused-react-imports) will automatically import the necessary react/jsx-runtime functions, which is why this additional configuration will disable a few rules that were checking if React was in scope when using JSX)
* the third config from which we will extend is the eslint-plugin-jsx-a11y flat config, this plugin offers two sets of [rules](https://github.com/jsx-eslint/eslint-plugin-jsx-a11y?tab=readme-ov-file#shareable-configs) the **recommended** and the **strict**, we will use the strict version (feel free to use recommended instead if you prefer less strict rules or disable some of the more strict rules manually)
* the importX plugin also has two flat configs, we add the recommended rules and then also the importX.flatConfigs.typescript configuration (the second one is only needed if you use typescript)

For the eslint-plugin-react-hooks things are a bit different, the [PR (#28773)](https://github.com/facebook/react/pull/28773) to add "ESLint v9 support" to the react-hooks plugin got merged, however the ticket about adding [support for flat config](https://github.com/facebook/react/issues/28313) is not closed (yet), there is however a [PR (#30774)](https://github.com/facebook/react/pull/30774) in the works

As we saw in the 
            










Congratulations ðŸŽ‰ you just added linting for your typescript, React and Next.js code, at this stage you can again use the linting command as usual:

```shell
npm run lint
```

> [!MORE]  
> [typescript-eslint "configuration" documentation](https://typescript-eslint.io/users/configs)  
> [typescript-eslint "rules overview" page](https://typescript-eslint.io/rules/)  

## MDX ESLint

We have added linting for our code next we will add linting for our MDX (markdown) content

First we install the MDX ESLint plugin:

```shell
npm i eslint-plugin-mdx --save-dev --save-exact
```

Then we can update out ESLint configuration and to use the MDX plugin:

```ts title="eslint.config.ts" showLineNumbers
import path from 'node:path'
import { fileURLToPath } from 'node:url'
import js from '@eslint/js'
import { FlatCompat } from '@eslint/eslintrc'
import tseslint from 'typescript-eslint'
import type { FlatConfig } from '@typescript-eslint/utils/ts-eslint'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)
const compat = new FlatCompat({
    baseDirectory: __dirname,
    recommendedConfig: js.configs.recommended,
    allConfig: js.configs.all
})

const tsESLintConfig = tseslint.config(
    // eslint recommended rules
    js.configs.recommended,
    //...tseslint.configs.recommended,
    // OR more type checked rules
    //...tseslint.configs.recommendedTypeChecked,
    // OR more strict rules
    ...tseslint.configs.strictTypeChecked,
    // optional stylistic rules
    //...tseslint.configs.stylistic
    // OR the type checked version
    ...tseslint.configs.stylisticTypeChecked,
    {
        languageOptions: {
            parserOptions: {
                projectService: true,
                tsconfigRootDir: import.meta.dirname,
            },
        }
    },
    {
        files: ['**/*.ts', '**/*.tsx']
    }
)

export default [
    ...compat.extends('next/core-web-vitals'),
    {
        ignores: [
            '.next/',
            '.vscode/',
            'public/',
        ]
    },
    {
        linterOptions: {
            reportUnusedDisableDirectives: 'warn'
        }
    },
    ...tsESLintConfig,
] satisfies FlatConfig.Config[]
```

TODO: finish



Congratulations ðŸŽ‰ if you made it this far, we had to make a lot of changes, but you now know a lot more about how ESLint works, and we are now ready to start adding linting for MDX content in the next part of this tutorial

If you liked this post, please consider making a [donation](https://buymeacoffee.com/chriswwweb) â¤ï¸ as it will help me create more content and keep it free for everyone

> [!MORE]  
> [eslint-plugin-react "rules" repository](https://github.com/jsx-eslint/eslint-plugin-react/tree/master/docs/rules)  
> [typescript-eslint "rules" overview](https://typescript-eslint.io/rules/)  

<Pagination
    previous={{ label: 'React in MDX and MDX in react', href: '/web_development/tutorials/next-js-static-mdx-blog/react-in-mdx-and-mdx-in-react' }}
    next={{ label: 'Linting MDX using remark-lint', href: '/web_development/tutorials/next-js-static-mdx-blog/linting-mdx-using-remark-lint' }}
/>

</article>
