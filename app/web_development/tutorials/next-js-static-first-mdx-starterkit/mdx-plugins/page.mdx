---
title: MDX (remark/rehype) plugins - Tutorial
description: MDX (remark/rehype) plugins - Next.js 15 static first MDX starterkit | Web development tutorials | www.chris.lu
keywords: ['MDX', 'remark', 'rehype', 'plugin', 'markdown', 'nextjs']
published: 2024-12-10T21:22:23.444Z
modified: 2024-12-10T21:22:23.444Z
permalink: https://chris.lu/web_development/tutorials/next-js-static-first-mdx-starterkit/mdx-plugins
section: Web development
---

import { sharedMetaDataArticle } from '@/shared/metadata-article'
import Breadcrumbs from '@/components/tutorial/Breadcrumbs'
import Pagination from '@/components/tutorial/Pagination'
import DonationsMessage from '@/shared/donations-message.mdx'

export const metadata = {
    title: frontmatter.title,
    description: frontmatter.description,
    keywords: frontmatter.keywords,
    alternates: {
        canonical: frontmatter.permalink,
    },
    openGraph: {
        ...sharedMetaDataArticle.openGraph,
        images: [{
          type: "image/png",
          width: 1200,
          height: 630,
          url: '/web_development/og/tutorials_next-js-static-first-mdx-starterkit/opengraph-image'
        }],
        url: frontmatter.permalink,
        section: frontmatter.section,
        publishedTime: frontmatter.published,
        modifiedTime: frontmatter.modified,
        tags: frontmatter.keywords,
    },
}

%toc%

<article>

<Breadcrumbs list={[
    { label: 'Web development tutorials', href: '/web_development' },
    { label: 'Next.js 15 static first MDX starterkit', href: '/web_development/tutorials/next-js-static-first-mdx-starterkit' },
]} />

# MDX plugins

You might have heard the word "MDX plugins" before, these plugins are either Remark plugins or Rehype plugins and in in an upcoming chapter we will learn what the differences between the two are

MDX plugins are a great way to add support for new features into your existing MDX setup, for example in this tutorial we add [](), 

There is a little catch regarding plugins and Turbopack though, 

> [!WARN]  
> If you skipped the **Next.js 15 MDX support** page, know that Turbopack and the mdxRS option (in next.config) will NOT work if you use plugins, as we are about to install several of them I recommend you first check out the [mdxRs and Turbopack chapters of the "MDX setup" page](/web_development/tutorials/next-js-static-first-mdx-starterkit/nextjs-mdx-setup#nextjs-15-rust-compiler)

## Difference between remark and rehype (optional)

This chapter contains mostly explanations about what remark and rehype plugins are, if you prefer you can skip to the next page about [installing and using a code highlight plugin](/web_development/tutorials/next-js-static-first-mdx-starterkit/code-highlighting-plugin) (for our MDX content)

To answer what Remark is I will quote the (very informative) remark readme:

> Remark is a tool that transforms markdown with plugins. These plugins can inspect and change your markup

Regarding what Rehype is, here is a quote from the rehype readme:

> Rehype is a tool that transforms HTML with plugins. These plugins can inspect and change the HTML

This means that **remark** plugins do their work by processing your markdown before it gets transformed into HTML, while **rehype** plugins will process HTML and do their work. Then the HTML gets transformed into JSX, and then other JSX, like a React component you imported into your MDX page gets added. There is an online tool that let's you experiment with this workflow, it is called [MDX playground](https://mdxjs.com/playground/), you can modify the input and then use the select field to switch between different modes, to see the corresponding output on the right

You will sometimes find a plugin for **remark** and then another plugin for **rehype**, but both do the same thing, for example, a plugin that would make a table of contents by listing all headings in your content, if it is a **remark** plugin it would search for headings like `# foo{:md}`, `## bar{:md}`, `### baz{:md}` in your markdown, while a similar **rehype** plugin would look for headings `<h1>foo</h1>{:html}`, `<h2>bar</h2>{:html}`, `<h3>baz</h3>{:html}` in the HTML (after markdown got converted to HTML). In such a case it is up to you to decide which one you want to use, there is no right or wrong here, just take the one that has the features you need, the one with more detailed documentation, the most stars on GitHub or the one with the least open Issues (it is up to you to define what criteria you want to use to judge which one is better)

> [!NOTE]  
> If you are interested in learning the difference between remark and rehype, I recommend checking out my [MDX post](/web_development/posts/mdx)  

In the previous chapter we already installed a **rehype-mdx-import-media** a Rehype plugin to convert all image paths to static imports and in the following parts of the tutorial, we will install and configure several [remark plugins](https://github.com/remarkjs/remark/blob/main/doc/plugins.md) and [rehype plugins](https://github.com/rehypejs/rehype/blob/main/doc/plugins.md) to add some interesting features to our MDX setup

> [!MORE]  
> [chris.lu "MDX" post](/web_development/posts/mdx)  
> [remark "plugins" README](https://github.com/remarkjs/remark/blob/main/doc/plugins.md)  
> [rehype "plugins" README](https://github.com/rehypejs/rehype/blob/main/doc/plugins.md)  

## Turbopack support for MDX (remark / rehype) plugins

Turbopack is a tool that does a similar job to what Webpack does, it takes your Javascript code and its dependencies and bundles them together, to do this work both use core tools but also heavily depend on plugins created by third parties

A major difference between the two is that Webpack is written Javascript and Turbopack is written in Rust, the idea is to be able to speed up building process by using a memory safe programming language like Rust, the disadvantage is that you can't just use your previous webpack plugins written in Javascript and use them in Turbopack. This is also the reason why you can't use MDX plugins with Turbopack, as those too are written in Javascript too (unless you add a mew loader, which happened in Next.js v15.1, as we will see in more detail shortly)

The state for the feature that enables us to use MDX plugins when creating development builds with Turbopack is still evolving a lot:

* In Next.js v15.0 (and all prior version) Turbopack has **NO** support for plugins
* Next.js v15.1 adds **experimental** support for MDX plugins (remark and rehype plugins written in Javascript) in Turbopack

TODO: finish this chapter

<DonationsMessage />

<Pagination
    previous={{ label: 'Optimizing images in MDX using next/image', href: '/web_development/tutorials/next-js-static-first-mdx-starterkit/optimizing-using-next-image' }}
    next={{ label: 'Code highlighting plugin', href: '/web_development/tutorials/next-js-static-first-mdx-starterkit/code-highlighting-plugin' }}
/>

</article>
