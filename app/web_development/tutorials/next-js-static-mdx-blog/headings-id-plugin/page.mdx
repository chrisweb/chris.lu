---
title: Rehype slug plugin to add IDs to headings - Tutorial
description: Rehype slug plugin to add IDs to headings - Next.js static MDX blog | www.chris.lu Web development tutorials
keywords: ['CI/CD', 'Vercel', 'build', 'Production', 'preview']
published: 2024-07-01T11:22:33.444Z
modified: 2024-07-01T11:22:33.444Z
permalink: https://chris.lu/web_development/tutorials/next-js-static-mdx-blog/headings-id-plugin
section: Web development
---

import { sharedMetaDataArticle } from '@/shared/metadata-article'
import Breadcrumbs from '@/components/tutorial/Breadcrumbs'
import Pagination from '@/components/tutorial/Pagination'

export const metadata = {
    title: frontmatter.title,
    description: frontmatter.description,
    keywords: frontmatter.keywords,
    alternates: {
        canonical: frontmatter.permalink,
    },
    openGraph: {
        ...sharedMetaDataArticle.openGraph,
        images: [{
          type: "image/png",
          width: 1200,
          height: 630,
          url: '/web_development/og/tutorials_next-static-mdx-blog/opengraph-image'
        }],
        url: frontmatter.permalink,
        section: frontmatter.section,
        publishedTime: frontmatter.published,
        modifiedTime: frontmatter.modified,
        tags: frontmatter.keywords,
    },
}

%toc%

<article>

<Breadcrumbs list={[
    { label: 'Web development tutorials', href: '/web_development' },
    { label: 'Next.js static MDX blog', href: '/web_development/tutorials/next-js-static-mdx-blog' },
]} />

# Rehype slug plugin to add IDs to headings

The [rehype-slug](https://github.com/rehypejs/rehype-slug) does not do much on its own, but it does something useful for other plugins, which is adding an ID to headings, this ID can then be used by plugins like [rehype-autolink-headings](https://github.com/rehypejs/rehype-autolink-headings) or a table of contents (TOC) plugin like [remark-table-of-contents](https://github.com/chrisweb/remark-table-of-contents)

The **rehype-slug** plugin will transform the text of a heading into an ID, if there are two headings with the same text, then the plugin will add a number to the ID to make sure every heading has a unique ID

## rehype-slug installation

To install the **rehype-slug** plugin package, use the following command:

```shell
npm i rehype-slug --save-exact
```

Now that the plugin is installed, we need to edit our Next.js configuration file and add it to our MDX setup:

```js title="next.config.mjs" showLineNumbers {6} /rehypeSlug/2#special
import { withSentryConfig } from '@sentry/nextjs'
import createMdx from '@next/mdx'
import rehypeMDXImportMedia from 'rehype-mdx-import-media'
import rehypePrettyCode from 'rehype-pretty-code'
import { readFileSync } from 'fs'
import rehypeSlug from 'rehype-slug'

const nextConfig = (phase) => {

    const themePath = new URL('./node_modules/material-theme/themes/OneDark-Pro.json', import.meta.url)
    const themeFileContent = readFileSync(themePath, 'utf-8')

    /** @type {import('rehype-pretty-code').Options} */
    const rehypePrettyCodeOptions = {
        theme: JSON.parse(themeFileContent),
        keepBackground: false,
        defaultLang: {
            block: 'tsx',
            inline: 'js',
        },
        tokensMap: {
            fn: 'entity.name.function',
            cmt: 'comment',
            str: 'string',
            var: 'entity.name.variable',
            obj: 'variable.other.object',
            prop: 'meta.property.object',
            int: 'constant.numeric',
        },
    }

    const withMDX = createMdx({
        extension: /\.(md|mdx)$/,
        options: {
            // optional remark and rehype plugins
            remarkPlugins: [[remarkTableOfContents, remarkTableOfContentsOptions]],
            rehypePlugins: [rehypeSlug, rehypeMDXImportMedia, [rehypePrettyCode, rehypePrettyCodeOptions]],
        },
    })
```

Line 6: we import the **rehypeSlug** plugin

Line 37: we add the plugin to our array of rehype plugins (in our MDX configuration)

And that's already it, the plugin is now operational

## Playground page to experiment with markdown headings

To see this plugin in action and also in preparation for the table of contents (TOC) plugin experiments we will do in the next chapter, we are going to create a new playground

First, go into the `/app/tutorial_examples` folder and then create a new `toc_playground` folder

Inside the `toc_playground` folder, create a new `page.mdx` MDX page and add the following content:

```md title="/app/tutorial_examples/toc_playground/page.mdx"
<article>

# headline level 1

Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin aliquet lacus in magna congue, sed vestibulum lorem luctus. Proin efficitur libero ut nisi tincidunt sodales. Ut maximus, ex ac suscipit consequat, ligula nibh blandit quam, a vestibulum elit turpis vel ante. Sed fringilla mi ac odio varius pharetra. Mauris et ex in mi vulputate sagittis. Aenean imperdiet neque at diam consequat eleifend. Donec sit amet metus odio. Aliquam commodo mollis purus, at euismod odio fermentum vitae. Pellentesque pretium ipsum porta, gravida arcu vel, aliquam elit. Vivamus vehicula semper risus, feugiat euismod nisi feugiat nec. Ut pulvinar id purus pulvinar efficitur. Nulla ac libero sed felis posuere tristique sit amet ac nisl. Cras a purus ligula. Fusce convallis suscipit varius.

## headline level 2

Aenean tristique, elit nec ultrices auctor, felis mauris interdum diam, et sagittis magna magna molestie erat. Donec sed purus aliquam, iaculis felis sed, laoreet nunc. Phasellus ultrices iaculis nisl, ac convallis lectus dignissim non. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Donec in enim posuere, maximus diam in, pharetra mauris. Nullam erat orci, posuere id lorem sed, aliquam tincidunt ex. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse auctor sem nunc, eget aliquet sem malesuada sit amet. Vivamus ornare mauris nisi, nec sodales justo elementum fermentum. Integer vel blandit neque. Pellentesque blandit, ligula a pulvinar vulputate, tortor nisi euismod tortor, ultrices eleifend nisl lectus sit amet nunc. Donec fermentum lacinia lectus. Maecenas feugiat blandit arcu, sed tincidunt odio sodales vel.

### headline level 3

Maecenas urna risus, aliquet non est in, tristique venenatis tellus. Ut vulputate consectetur pharetra. Aliquam erat volutpat. Phasellus imperdiet blandit nisl, sit amet consequat libero luctus ac. Proin sodales, urna nec varius egestas, leo eros semper purus, in posuere risus libero tempus justo. Nunc a elit ullamcorper, lacinia ipsum sit amet, imperdiet ipsum. Nunc varius condimentum congue. Pellentesque tortor libero, vulputate eget dapibus sit amet, faucibus in nibh. Maecenas hendrerit augue velit, eu pretium sem consequat pellentesque. Duis elementum semper dolor ac posuere. Aenean vitae gravida elit. Maecenas mattis lorem mauris, ut tincidunt orci efficitur nec.

#### headline level 4

Sed sodales mi id odio finibus, eu scelerisque dui convallis. Aliquam ornare urna luctus convallis faucibus. Cras quis vulputate urna. Aenean et ante vitae turpis mattis pretium in ut orci. Sed vitae porttitor mauris. Duis dignissim aliquam ante, imperdiet consequat magna iaculis vel. Nam sit amet ipsum a justo tincidunt pretium sed ut nisl. Mauris lacus dui, aliquam id placerat a, egestas ac lorem. Praesent pulvinar diam nec elit sollicitudin dignissim. Etiam condimentum mi et tellus ornare iaculis in eu lorem. Nam elit odio, venenatis ut dictum ac, elementum ac diam. Aenean at aliquam augue, vel sagittis eros. Praesent eget turpis at mi ornare fermentum in non magna.

</article>

```

We have added some markdown headings of different levels to our MDX page as well as some fake text using an online [lorem ipsum generator](https://www.lipsum.com/), the content is wrapped inside of an `<article>` element (which is optional but I like to use semantic elements whenever it makes sense)

Now launch the dev server, then open the [http://localhost:3000/tutorial_examples/toc_playground](http://localhost:3000/tutorial_examples/toc_playground) TOC playground URL and then right-click on a heading and select **Inspect**, if you now look at the HTML code of the heading you will notice that **rehype slug** has added an ID

Congratulations 🎉 all of your headings now automatically get a unique ID

If you liked this post, please consider making a [donation](https://buymeacoffee.com/chriswwweb) ❤️ as it will help me create more content and keep it free for everyone

> [!MORE]  
> [npmjs.com "rehype-slug" page](https://www.npmjs.com/package/rehype-slug)  

<Pagination
    previous={{ label: 'Code highlighting plugin', href: '/web_development/tutorials/next-js-static-mdx-blog/code-highlighting-plugin' }}
    next={{ label: 'Table of contents (TOC) plugin', href: '/web_development/tutorials/next-js-static-mdx-blog/table-of-contents-plugin' }}
/>

</article>
